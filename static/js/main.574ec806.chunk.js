(this["webpackJsonpfood-ordering"]=this["webpackJsonpfood-ordering"]||[]).push([[0],{156:function(e,a,t){e.exports=t.p+"static/media/cross.441d8611.svg"},201:function(e,a,t){},203:function(e,a,t){e.exports=t.p+"static/media/plus.311313cd.svg"},296:function(e,a,t){e.exports=t.p+"static/media/cart.890dce60.svg"},297:function(e,a,t){e.exports=t.p+"static/media/fobiden-order.6b4b70dc.svg"},303:function(e,a,t){e.exports=t.p+"static/media/congrats.211b8e65.svg"},304:function(e,a,t){e.exports=t.p+"static/media/checklist.80d775c4.svg"},306:function(e,a,t){e.exports=t.p+"static/media/pencil.b0753817.svg"},307:function(e,a,t){e.exports=t.p+"static/media/tick.db93b3b8.svg"},309:function(e,a,t){e.exports=t.p+"static/media/logo.913ae04a.svg"},315:function(e,a,t){e.exports=t(619)},557:function(e,a,t){},586:function(e,a,t){},587:function(e,a,t){},600:function(e,a,t){},61:function(e,a,t){e.exports=t.p+"static/media/loading.546dec86.svg"},617:function(e,a,t){},619:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),i=t(120),s=t(20),u=t(5),o=t(7),d=t.n(o),m=t(16),E=t(3),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=setInterval((function(e,a,t){new Date(e,a,t,13,45,0,0).getTime()-(new Date).getTime()<0&&clearInterval(O)}),1e3),f=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"null";return e.reduce((function(e,n){var r=n[a];return"object"===typeof r?(e[r[t]]=e[r[t]]||[],e[r[t]].push(n)):(e[r]=e[r]||[],e[r].push(n)),e}),{})},g=t(287),b=t.n(g)()({menu:[function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"GET_MENU_LOADING":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,menuList:[],getMenuFail:null});case"GET_MENU_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,menuList:a.payload,getMenuFail:null});case"GET_MENU_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,menuList:[],getMenuFail:a.payload.message});default:return e}},{menuList:[],isLoading:!1,getMenuFail:null}],users:[function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"GET_CUR_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{user:a.payload,getUserFail:null});case"GET_CUR_USER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{user:{},getUserFail:a.payload.message});case"GET_USERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{userList:a.payload,getUserFail:null});case"GET_USERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{userList:[],getUserFail:a.payload.message});default:return e}},{user:{},userList:[],userFail:null}],cart:[function(e,a){switch(a.type){case"ADD_CART_ITEM":return Object(E.a)(Object(E.a)({},e),{},{cartList:a.payload,isAnimateCart:!0,isCartAdded:!0});case"REMOVE_CART_ADDED":return Object(E.a)(Object(E.a)({},e),{},{isCartAdded:!0,isAnimateCart:!1});case"DELETE_CART_ITEM":var t=e.cartList,n=a.payload;return Object(E.a)(Object(E.a)({},e),{},{cartList:t.filter((function(e){return e.id!==n.id})),isAnimateCart:!0,isCartAdded:!1});case"DELETE_CART":return Object(E.a)(Object(E.a)({},e),{},{cartList:[],isAnimateCart:!1,isCartAdded:!1});default:return e}},{cartList:[],isAnimateCart:!1,isCartAdded:!1}],submitOrder:[function(e,a){switch(a.type){case"SUBMIT_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!1,isLoading:!0,submitOrderFail:null});case"SUBMIT_ORDERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!0,isLoading:!1,submitOrderFail:null});case"SUBMIT_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!1,isLoading:!1,submitOrderFail:a.payload});default:return e}},{createOrderSuccess:!1,isLoading:!1,submitOrderFail:null}],orders:[function(e,a){switch(a.type){case"GET_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!0,orderList:[],getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"GET_ORDERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:a.payload,getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"GET_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:[],getOrdersFail:a.payload.message,deleteOrderRequest:!1,deleteOrderFail:null});case"DELETE_ORDER_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,getOrdersFail:null,deleteOrderRequest:!0,deleteOrderFail:null});case"DELETE_ORDER_SUCCESS":var t=a.payload,n=e.orderList;return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:n.filter((function(e){return e._id!==t._id})),getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"DELETE_ORDER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:[],getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:a.payload.message});case"UPDATE_ORDER_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,getOrdersFail:null,updateOrderRequest:!0,updateOrderFail:null});case"UPDATE_ORDER_SUCCESS":var r=a.payload,c=e.orderList;return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:c.map((function(e){return e._id===r._id?r:e})),getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"UPDATE_ORDER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:[],getOrdersFail:null,updateOrderRequest:!1,updateOrderFail:a.payload.message});default:return e}},{orderList:[],isOrdersLoading:!1,getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null,updateOrderRequest:!1,updateOrderFail:null}],orderTimeout:[function(e,a){switch(a.type){case"SET_ORDER_TIMEOUT":return Object(E.a)(Object(E.a)({},e),{},{isOrderTimeout:!0});case"RESET_ORDER_TIMEOUT":return Object(E.a)(Object(E.a)({},e),{},{isOrderTimeout:!1});default:return e}},{isOrderTimeout:!1}],allOrders:[function(e,a){switch(a.type){case"GET_ALL_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,allOrderList:[],getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_SUCCESS":var t=a.payload,n=t.data,r=t.type,c=f(n,r,"username");return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:c,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:[],getOrdersFail:a.payload.message,isCheckingPaid:!1,checkPaidFail:null});case"GET_ORDERS_HISTORY_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,allOrderList:[],getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ORDERS_HISTORY_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:a.payload,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ORDERS_HISTORY_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:[],getOrdersFail:a.payload.message,isCheckingPaid:!1,checkPaidFail:null});case"CHECK_PROVIDER_PAID_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!0,checkPaidFail:null});case"CHECK_PROVIDER_PAID_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,allOrderList:a.payload,checkPaidFail:null});case"CHECK_PROVIDER_PAID_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,allOrderList:[],checkPaidFail:a.payload});case"CHECK_PAID_ALL_WEEK_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!0,checkPaidFail:null,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ALL_WEEK_SUCCESS":var l=f(a.payload,"user","username");return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:l,checkPaidFail:null,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ALL_WEEK_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:[],checkPaidFail:a.payload.message,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ORDER_ITEM_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!0});case"CHECK_PAID_ORDER_ITEM_SUCCESS":var i=a.payload,s=i.data,u=i.type,o=f(s,u,"username");return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:o});case"CHECK_PAID_ORDER_ITEM_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:[],checkPaidFail:a.payload});default:return e}},{allOrderList:[],isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null}]}),h=Object(u.a)(b,2),_=h[0],v=h[1],y=r.a.createContext({}),S=function(e){var a=e.children,t=Object(n.useReducer)(_,v),c=Object(u.a)(t,2),l=c[0],i=c[1];return r.a.createElement(y.Provider,{value:{data:l,setData:i}},a)},j=function(){var e=Object(n.useContext)(y),a=e.data,t=e.setData;return[a,Object(n.useCallback)((function(e){var a=e.type,n=e.payload;t({payload:n,type:a})}),[t])]},C=function(e){return{type:"GET_MENU_SUCCESS",payload:e}},R=t(67),L=t.n(R);console.log("production");var k="https://luch-ordering.herokuapp.com",T="https://luch-ordering.herokuapp.com/google",D=function(){var e=j(),a=Object(u.a)(e,2)[1];return Object(n.useCallback)(Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"GET_MENU_LOADING"}),e.prev=1,e.next=4,L.a.get("".concat(k,"/menuList")).then((function(e){return e.data}));case 4:t=e.sent,a(C(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"GET_MENU_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[a])},A=function(){var e=localStorage.getItem("token");return L.a.get("".concat(k,"/users/current"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},N=function(){var e=localStorage.getItem("token");return L.a.get("".concat(k,"/users"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},I=function(e){return{type:"GET_USERS_SUCCESS",payload:e}},F=function(e){return{type:"GET_USERS_FAIL",payload:e}},P=t(61),w=t.n(P),U=(t(557),t(312)),x=t(4),M=t.n(x),q=t(203),G=t.n(q),H=function(e){return{type:"ADD_CART_ITEM",payload:e}},K=t(620),Q=function(e){var a=e.handleChange,t=e.options,n=e.defaultValue,c=K.a.Option;return r.a.createElement(K.a,{defaultValue:n,onChange:a},t.map((function(e){return r.a.createElement(c,{key:e.value,value:e.value},e.label)})))},V=function(e){var a=e.item,t=Object(n.useState)(1),c=Object(u.a)(t,2),l=c[0],i=c[1],s=j(),o=Object(u.a)(s,2),d=o[0],m=d.users,E=d.cart,p=d.orderTimeout,O=d.menu,f=o[1],g=O.menuList.filter((function(e){return!e.isExtra})).map((function(e){return{label:e.name,value:e.name}})),b=Object(n.useState)(g[0].value),h=Object(u.a)(b,2),_=h[0],v=h[1],y=m.user,S=E.cartList,C=function(){var e={id:a._id,dish_name:a.isExtra?"".concat(_," th\xeam"):a.name,quantity:l,extraDish:a.isExtra?_:null};if(y.username)if(0===S.length)f(H(S)),setTimeout((function(){return f({type:"REMOVE_CART_ADDED"})}),500),S.push(e);else{var t=[].concat(Object(U.a)(S),[e]);f(H(t)),setTimeout((function(){return f({type:"REMOVE_CART_ADDED"})}),500)}else window.open(T,"_self")};return r.a.createElement("div",{className:M()("menu-item",{"is-disabled":S.some((function(e){return e.id===a._id}))||p.isOrderTimeout,"extra-dish":a.isExtra})},a.isExtra?r.a.createElement("div",{className:"dish-type"},r.a.createElement(Q,{defaultValue:g[0].label,handleChange:function(e){v(e)},options:g}),r.a.createElement("div",{onClick:C},r.a.createElement("img",{className:"icon-add",src:G.a,alt:""}))):r.a.createElement("div",{className:"image"},r.a.createElement("img",{className:"img-dish",src:a.img,alt:a.name}),r.a.createElement("div",{onClick:C},r.a.createElement("img",{className:"icon-add",src:G.a,alt:""}))),r.a.createElement("div",{className:"desc"},r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"name"},a.name),r.a.createElement("span",{className:"price"},a.price)),r.a.createElement("div",{className:"quantity"},r.a.createElement("input",{type:"number",value:l,onChange:function(e){var a=e.target.value,t=parseInt(a);i(t<=0?1:t>5?5:t)}}))))},B=function(){var e=j(),a=Object(u.a)(e,2),t=a[0].menu,c=a[1],l=D(),i=t.isLoading,s=t.menuList;return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:a=e.sent,localStorage.setItem("roles",a.roles),c({type:"GET_CUR_USER_SUCCESS",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),l()}),[c,l]),r.a.createElement("div",{className:"menu-wrapper"},i&&r.a.createElement("img",{className:"icon-loading",src:w.a,alt:"loading-spinner"}),s.map((function(e){return r.a.createElement(V,{key:e._id,item:e})})))},W=t(109),Y=t(156),z=t.n(Y),J=function(e){var a=e.order,t=j(),n=Object(u.a)(t,2)[1];return r.a.createElement("div",{className:"cart-item"},r.a.createElement("div",{className:"name"},a.dish_name),r.a.createElement("div",{className:"desc"},r.a.createElement("div",{className:"qty"},a.quantity),r.a.createElement("span",{className:"remove",onClick:function(){n(function(e){return{type:"DELETE_CART_ITEM",payload:e}}(a))}},r.a.createElement("img",{src:z.a,alt:"remove-order"}))))},X=function(e){return{type:"SUBMIT_ORDERS_FAIL",payload:e}},$=function(e){return{type:"GET_ORDERS_SUCCESS",payload:e}},Z=function(e){return{type:"DELETE_ORDER_SUCCESS",payload:e}},ee=function(e){return{type:"GET_ORDERS_HISTORY_SUCCESS",payload:e}},ae=function(e){return{type:"UPDATE_ORDER_SUCCESS",payload:e}},te=L.a.create({baseURL:k});te.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e}));var ne=te,re=function(e){return ne.post("/orders/create",e).then((function(e){return e.data}))},ce=function(e){return ne.post("/orders/check-paid-provider",e).then((function(e){return e.data}))},le=function(e){return ne.post("/orders/paid-allweeks",e).then((function(e){return e.data}))},ie=function(e){return ne.post("/orders/delete",e).then((function(e){return e.data}))},se=function(e){return ne.get("/orders/payment-by-week",{params:{week:e}}).then((function(e){return e.data}))},ue=function(e){return ne.get("/orders/payments",{params:{type:e}}).then((function(e){return e.data}))},oe=function(e){return ne.put("/orders/update",e).then((function(e){return e.data}))},de=t(296),me=t.n(de),Ee=(t(586),function(){var e=j(),a=Object(u.a)(e,1)[0],t=a.cart,c=a.submitOrder,l=t.cartList,i=t.isAnimateCart,s=t.isCartAdded,o=c.isLoading,E=Object(n.useState)(!1),p=Object(u.a)(E,2),O=p[0],f=p[1],g=function(){var e=j(),a=Object(u.a)(e,2)[1];return Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SUBMIT_ORDERS_REQUEST"}),e.prev=1,e.next=4,re(t);case 4:e.sent,a({type:"SUBMIT_ORDERS_SUCCESS"}),a({type:"DELETE_CART"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a(X(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),[a])}();Object(n.useEffect)((function(){s&&f(s)}),[s]);return r.a.createElement("div",{className:"cart-wrapper"},r.a.createElement("div",{className:M()("cart-icon",{shake:i}),onClick:function(){f(!O)}},r.a.createElement("img",{src:me.a,alt:"cart-icon"}),r.a.createElement("span",{className:"cart-qty"},l.length)),r.a.createElement("div",{className:M()("cart-content",{show:O&&l.length})},o&&r.a.createElement("img",{className:"cart-loading",src:w.a,alt:""}),l.map((function(e){return r.a.createElement(J,{key:e.id,order:e})})),r.a.createElement("button",{className:"btn-order",onClick:function(){var e=l.map((function(e){return{dishId:e.id,quantity:e.quantity,date:(new Date).toDateString(),createdAt:W().startOf("day"),paid:!1,week:W().week(),extraDish:e.extraDish}}));g(e)}},"Order")))}),pe=t(621),Oe=t(297),fe=t.n(Oe),ge=(t(587),function(){var e=new Date,a=e.getFullYear(),t=e.getMonth(),c=e.getDate(),l=new Date(a,t,c,10,58,0,0).getTime(),i=new Date(a,t,c,8,30,0,0).getTime(),s=(new Date).getTime()>=i,o=Object(n.useState)({hours:0,minutes:0,seconds:0}),d=Object(u.a)(o,2),m=d[0],E=d[1],p=Object(n.useState)(l),O=Object(u.a)(p,1)[0],f=Object(n.useState)(!1),g=Object(u.a)(f,2),b=g[0],h=g[1],_=Object(n.useCallback)((function(){if(O){var e=(new Date).getTime(),a=O-e,t=Math.floor(a%36e5/6e4),n=Math.floor(a%6e4/1e3),r=[1,2,3,4,5,6,7,8,9],c=Math.floor(a%864e5/36e5);r.includes(c)&&(c="0".concat(c)),r.includes(t)&&(t="0".concat(t)),r.includes(n)&&(n="0".concat(n)),E({hours:c,minutes:t,seconds:n}),h(c<=0&&t<=0&&n<=0)}}),[O]);Object(n.useEffect)((function(){if(setInterval((function(){return _()}),1e3),b)return function(){return clearInterval(_)}}),[b,_]);var v=m.hours,y=m.minutes,S=m.seconds;return r.a.createElement("div",{className:"countdown"},v>=0&&y>=0&&S>0&&r.a.createElement("div",null,r.a.createElement("p",{className:"countdown-message"},"Th\u1eddi gian order c\u1ee7a b\u1ea1n c\xf2n l\u1ea1i"),r.a.createElement("span",null,v),r.a.createElement("span",null,y),r.a.createElement("span",null,S)),r.a.createElement(pe.a,{className:"timeout-modal",visible:b||!s,onCancel:function(){},width:"60vw",height:"60vh",footer:null},r.a.createElement("img",{className:"timeout-icon",src:fe.a,alt:"forbiden-order"}),b&&r.a.createElement("div",{className:"timeout-message"},"Th\u1eddi gian order c\u01a1m h\xf4m nay \u0111\xe3 h\u1ebft, b\u1ea1n vui l\xf2ng quay l\u1ea1i v\xe0o l\xfac"," ",r.a.createElement("span",{className:"note"},"8h00")," ng\xe0y mai nh\xe9!!!"),!s&&r.a.createElement("div",{className:"timeout-message"},"Th\u1eddi gian order ch\u01b0a t\u1edbi, b\u1ea1n vui l\xf2ng quay l\u1ea1i v\xe0o l\xfac"," ",r.a.createElement("span",{className:"note"},"8h00")," nh\xe9!!!")))}),be=t(303),he=t.n(be),_e=t(304),ve=t.n(_e),ye=(t(599),t(126)),Se=(t(600),function(){var e=j(),a=Object(u.a)(e,1)[0].submitOrder.createOrderSuccess,t=Object(n.useState)(a),c=Object(u.a)(t,2),l=c[0],i=c[1],o=Object(s.g)(),d="admin"===localStorage.getItem("roles");Object(n.useEffect)((function(){a&&i(a)}),[a]);var m=function(){i(!1)};return r.a.createElement("div",{className:"page"},r.a.createElement("h1",{className:"text-uppercase text-center"},"SP Team Lunch Ordering"),!d&&r.a.createElement(ge,null),r.a.createElement("a",{href:"/lunch-ordering-fe/#/orders",className:"icon-orders"},r.a.createElement("img",{src:ve.a,alt:"checklist"})),r.a.createElement(Ee,null),r.a.createElement(B,null),r.a.createElement(pe.a,{className:"congrats-modal",visible:l,onCancel:m,width:"60vw",height:"60vh",footer:[r.a.createElement(ye.a,{size:"large",key:"back",onClick:m},"\u0110\xf3ng"),r.a.createElement(ye.a,{key:"submit",size:"large",type:"primary",onClick:function(){o.push("/orders")}},"Xem Order")]},r.a.createElement("img",{className:"modal-icon",src:he.a,alt:"forbiden-order"}),r.a.createElement("div",{className:"congrats-message"},"Thank you! B\u1ea1n \u0111\xe3 order th\xe0nh c\xf4ng!!",r.a.createElement("p",null,"Ch\xfac Ngon mi\u1ec7ng"))))}),je=function(e){return{type:"CHECK_PAID_ORDER_ITEM_SUCCESS",payload:e}},Ce=function(e){return{type:"CHECK_PROVIDER_PAID_SUCCESS",payload:e}},Re=function(e){return{type:"CHECK_PROVIDER_PAID_FAIL",payload:e}},Le=function(e){return{type:"CHECK_PAID_ALL_WEEK_SUCCESS",payload:e}},ke=function(e){return{type:"CHECK_PAID_ALL_WEEK_FAIL",payload:e}},Te=function(){var e=j(),a=Object(u.a)(e,2)[1];return{checkPaidOrderItem:Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PAID_ORDER_ITEM_REQUEST"}),e.prev=1,e.next=4,r=t,ne.post("/orders/check-paid",r).then((function(e){return e.data}));case 4:n=e.sent,a(je({data:n,type:t.type})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a((e.t0,{type:"CHECK_PAID_ORDER_ITEM_FAIL"}));case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a]),checkProviderPaidOrder:Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PROVIDER_PAID_REQUEST"}),e.prev=1,e.next=4,ce(t);case 4:n=e.sent,a(Ce(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(Re(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a]),checkPaidOrderAllWeek:Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PAID_ALL_WEEK_REQUEST"}),e.prev=1,e.next=4,le(t);case 4:n=e.sent,a(Le(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(ke(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a])}},De=t(306),Ae=t.n(De),Ne=t(307),Ie=t.n(Ne),Fe=function(e){var a=e.order,t=e.isAdmin,c=e.isAllOrders,l=e.type,i=e.week,s=j(),o=Object(u.a)(s,1)[0],E=o.menu,O=o.users,f=E.menuList,g=O.userList,b=f.filter((function(e){return!e.isExtra})).map((function(e){return{value:e._id,label:e.name}})),h=g.map((function(e){return{value:e._id,label:e.username}})),_=Object(n.useState)(a.paid),v=Object(u.a)(_,2),y=v[0],S=v[1],C=Object(n.useState)(!1),R=Object(u.a)(C,2),L=R[0],k=R[1],T=Object(n.useState)(a.user._id),D=Object(u.a)(T,2),A=D[0],N=D[1],I=Object(n.useState)(a.dish._id),F=Object(u.a)(I,2),P=F[0],w=F[1],U=Te().checkPaidOrderItem,x="date"===l,q=j(),G=Object(u.a)(q,1)[0].allOrders.isCheckingPaid,H=a.quantity,K=a.dish,V=K.name,B=K.price,W=a.user.username,Y=a.extraDish,J=a.date,X=j(),$=Object(u.a)(X,1)[0].orders.deleteOrderRequest,ee=Object(n.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],re=te[1],ce=function(){var e=j(),a=Object(u.a)(e,2),t=(a[0].allOrders.allOrderList,a[1]);return Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"DELETE_ORDER_REQUEST"}),e.prev=1,e.next=4,ie(a);case 4:n=e.sent,t(Z(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"DELETE_ORDER_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[t])}(),le=function(){var e=j(),a=Object(u.a)(e,2)[1];return Object(n.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"UPDATE_ORDER_REQUEST"}),e.prev=1,e.next=4,oe(t);case 4:n=e.sent,a(ae(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"UPDATE_ORDER_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a])}(),se=function(){return re(!1)};return Object(n.useEffect)((function(){S(a.paid)}),[a.paid]),r.a.createElement("div",{key:a._id,className:"order-item"},r.a.createElement("span",{className:"name"},L?r.a.createElement(Q,{defaultValue:a.user.username,handleChange:function(e){return N(e)},options:h}):x?W:J),r.a.createElement("span",{className:"quantity"},H),r.a.createElement("span",{className:"dish-name"},L?r.a.createElement(Q,{defaultValue:a.dish.name,handleChange:function(e){return w(e)},options:b}):Y?"".concat(Y," th\xeam"):V),!c&&r.a.createElement("span",{className:"date"},function(e){if(e){var a=new Date(e),t=a.getDate(),n=a.getMonth(),r=p[n],c=a.getFullYear();return"".concat(t," ").concat(r," ").concat(c)}}(J)),r.a.createElement("span",{className:"price"},"".concat(parseInt(B.slice(0,2))*H,",000\u0111")),t&&r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("div",{className:"paid"},r.a.createElement("span",{className:"order-checkbox"},r.a.createElement("input",{type:"checkbox",onChange:function(e){var t=e.target.checked,n={id:a._id,isPaid:t,type:l,week:i};U(n),S(t)},checked:y||a.paid,disabled:G}),r.a.createElement("span",{className:M()("check-mask",{"is-disabled":G})}))),!c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"delete",onClick:function(){return re(!0)}},r.a.createElement("img",{src:z.a,alt:"delete-order"})),r.a.createElement("span",{className:"edit",onClick:function(){k(!L),L&&(le({orderId:a._id,editedDishId:P,editedUserId:A}),w(b[0].value),N(h[0].value))}},r.a.createElement("img",{src:L?Ie.a:Ae.a,alt:"update-order"})))),r.a.createElement(pe.a,{className:"order-item__modal",visible:ne,onCancel:se,footer:[r.a.createElement(ye.a,{size:"large",key:"back",onClick:se},"\u0110\xf3ng"),r.a.createElement(ye.a,{key:"submit",size:"large",type:"primary",loading:$,onClick:function(){ce(a)}},"Xo\xe1")]},r.a.createElement("p",null,"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n xo\xe1 ch\u1ee9???")))},Pe=(t(201),function(){var e=j(),a=Object(u.a)(e,2),t=a[0].orders,c=t.orderList,l=t.isOrdersLoading,i=a[1],s=D(),o=function(){var e=j(),a=Object(u.a)(e,2)[1];return Object(n.useCallback)(Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:t=e.sent,a(I(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(F(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a])}(),E="admin"===localStorage.getItem("roles");Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"GET_ORDERS_REQUEST"}),e.prev=1,e.next=4,ne.get("/orders/list").then((function(e){return e.data}));case 4:a=e.sent,i($(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i({type:"GET_ORDERS_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();s(),o(),e()}),[i,s,o]);var p=c.map((function(e){return{quantity:e.quantity,dishName:e.extraDish?"".concat(e.extraDish," th\xeam"):e.dish.name,price:parseInt(e.dish.price.slice(0,2))}})),O=f(p,"dishName"),g=Object.keys(O).map((function(e){return{name:e,qty:O[e].reduce((function(e,a){return e+a.quantity}),0),price:O[e].reduce((function(e,a){return e+a.price*a.quantity}),0)}})),b=g.reduce((function(e,a){return e+a.qty}),0),h=g.reduce((function(e,a){return e+a.price}),0);return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"order-wrapper"},r.a.createElement("h1",{className:"order-title"},"Orders List"),l&&r.a.createElement("img",{className:"icon-loading",src:w.a,alt:"loading-spinner"}),0!==c.length&&r.a.createElement("div",{className:"order-total"},r.a.createElement("h3",{className:"title"},"Total List"),r.a.createElement("div",{className:"header"},r.a.createElement("span",null,"T\xean m\xf3n"),r.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),r.a.createElement("span",null,"Gi\xe1")),g.map((function(e){return r.a.createElement("div",{key:e.name,className:"item"},r.a.createElement("span",null,e.extraDish||e.name),r.a.createElement("span",null,e.qty),r.a.createElement("span",null,"".concat(e.price,".000\u0111")))})),r.a.createElement("div",{className:"total"},r.a.createElement("span",null,"T\u1ed5ng c\u1ed9ng"),r.a.createElement("span",null,b),r.a.createElement("span",null,"".concat(h,".000\u0111")))),0!==c.length&&r.a.createElement("div",{className:"order-content"},r.a.createElement("div",{className:"order-item__header"},r.a.createElement("span",null,"Ng\u01b0\u1eddi Order"),r.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),r.a.createElement("span",{className:"dish-name"},"T\xean M\xf3n"),r.a.createElement("span",null,"Ng\xe0y Order"),r.a.createElement("span",null,"Gi\xe1"),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"delete"}),r.a.createElement("span",{className:"edit"}))),c.map((function(e){return r.a.createElement(Fe,{key:e._id,order:e,isAdmin:E,isAllOrders:!1,type:"date"})})))))}),we=t(91),Ue=function(e){var a=e.item,t=e.isAdmin,n=e.isAllOrders,c=e.type,l=e.week,i="date"===c;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"order-item__date-title",key:a._id},r.a.createElement("span",null,a[c])),r.a.createElement("div",{className:"order-item__header"},r.a.createElement("span",null,"".concat(i?"Ng\u01b0\u1eddi Order":"Ng\xe0y Order")),r.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),r.a.createElement("span",null,"T\xean M\xf3n"),r.a.createElement("span",null,"Gi\xe1"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"paid"},"Paid"),!n&&r.a.createElement("span",{className:"delete"}))),a.orders.map((function(e){return r.a.createElement(Fe,{key:e._id,order:e,isAdmin:!0,isAllOrders:n,type:c,paymentId:a._id,week:l})})),r.a.createElement("div",{className:"order-item__total"},r.a.createElement("span",null,"T\u1ed5ng C\u1ed9ng"),r.a.createElement("span",null,a.totalQty),r.a.createElement("span",null),r.a.createElement("span",{className:"price"},"".concat(a.totalPrice,",000\u0111")),r.a.createElement("span",null)))},xe=t(604);W.extend(xe);var Me=W().week(),qe=[{label:"Date",value:"date"},{label:"User",value:"user"}],Ge=[{label:"Current Week",value:Me},{label:"Last Week",value:Me-1},{label:"Last 2 Week",value:Me-2}],He=function(){var e=j(),a=Object(u.a)(e,2),t=a[0].allOrders,c=t.allOrderList,l=t.isLoading,i=t.isCheckingPaid,s=a[1],o=Te().checkPaidOrderAllWeek,E=Object(n.useState)("user"),p=Object(u.a)(E,2),O=p[0],f=p[1],g=Object(n.useState)(Me),b=Object(u.a)(g,2),h=b[0],_=b[1],v="admin"===localStorage.getItem("roles"),y=Object.keys(c).map((function(e){var a,t=c[e],n=t.reduce((function(e,a){return e+parseInt(a.dish.price.slice(0,2))*a.quantity}),0),r=t.reduce((function(e,a){return e+a.quantity}),0);return a={},Object(we.a)(a,O,e),Object(we.a)(a,"orders",t),Object(we.a)(a,"totalPrice",n),Object(we.a)(a,"totalQty",r),a})),S=y.reduce((function(e,a){return e+a.totalPrice}),0),C=y.reduce((function(e,a){return e+a.totalQty}),0),R=function(){var e=Object(m.a)(d.a.mark((function e(a,t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"GET_ALL_ORDERS_REQUEST"}),e.prev=1,e.next=4,se(t);case 4:n=e.sent,s({type:"GET_ALL_ORDERS_SUCCESS",payload:{data:n,type:a}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"GET_ALL_ORDERS_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a,t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R("user",Me)}),[s]);return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"order-wrapper"},r.a.createElement("div",{className:"order-totalweek"},r.a.createElement("span",null,"T\u1ed5ng ti\u1ec1n"),r.a.createElement("span",null,C),r.a.createElement("div",{className:"price"},"".concat(S,",000"),r.a.createElement("sup",null,"\u0111"))),r.a.createElement("div",{className:"order-filter"},r.a.createElement(Q,{defaultValue:"user",handleChange:function(e){f(e),R(e,h)},options:qe}),r.a.createElement(Q,{defaultValue:Me,handleChange:function(e){_(e),R(O,e)},options:Ge})),r.a.createElement("h1",{className:"order-title"},"All Orders List"),l&&r.a.createElement("img",{className:"icon-loading",src:w.a,alt:"loading-spinner"}),y.length>0&&r.a.createElement("div",{className:"order-summary"},r.a.createElement("div",{className:"order-summary__title"},r.a.createElement("span",null,"".concat("date"===O?"Ng\xe0y":"T\xean")),r.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),r.a.createElement("span",null,"Ti\u1ec1n"),r.a.createElement("span",null,"Paid")),y.map((function(e,a){var t=e.orders.every((function(e){return e.paid}));return r.a.createElement("div",{key:a,className:M()("order-summary__item",{paid:t})},r.a.createElement("span",{className:"name"},e.user||e.date),r.a.createElement("span",{className:"quantity"},e.totalQty),r.a.createElement("span",{className:"price"},"".concat(e.totalPrice,",000\u0111")),r.a.createElement("span",{className:"order-checkbox paid"},r.a.createElement("input",{type:"checkbox",onChange:function(a){return function(e,a){var t=e.target.checked;console.log(a),o({id:a.orders[0].user._id,isPaidAllWeek:t,userId:a.user,week:h})}(a,e)},checked:t,disabled:i}),r.a.createElement("span",{className:M()("check-mask",{"is-disabled":i})})))}))),y.length>0&&y.map((function(e,a){return r.a.createElement(Ue,{key:a,item:e,isAdmin:v,isAllOrders:!0,type:O,week:h})}))))},Ke=function(){var e=j(),a=Object(u.a)(e,2),t=a[0].allOrders,c=t.allOrderList,l=t.isLoading,i=t.isCheckingPaid,s=a[1],o=Object(n.useState)("date"),p=Object(u.a)(o,2),O=p[0],f=p[1],g="admin"===localStorage.getItem("roles"),b=c.map((function(e){var a=e.orders.reduce((function(e,a){return e+35*a.quantity}),0),t=e.orders.reduce((function(e,a){return e+a.quantity}),0);return Object(E.a)(Object(E.a)({},e),{},{totalPrice:a,totalQty:t})})).sort((function(e,a){return new Date(a.createdAt)-new Date(e.createdAt)})),h=function(){var e=Object(m.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"GET_ORDERS_HISTORY_REQUEST"}),e.prev=1,e.next=4,ue(a);case 4:t=e.sent,n=t.filter((function(e){return e.orders.length>0})),s(ee(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:"GET_ORDERS_HISTORY_FAIL",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h("date")}),[s]);return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"order-wrapper"},r.a.createElement(Q,{handleChangeType:function(e){f(e),h(e)},className:"order-filter"}),r.a.createElement("h1",{className:"order-title"},"Orders History"),l&&r.a.createElement("img",{className:"icon-loading",src:w.a,alt:"loading-spinner"}),0!==b.length&&b.map((function(e){return r.a.createElement(Ue,{key:e._id,item:e,isAdmin:g,isAllOrders:!0,isCheckingPaid:i,type:O})}))))},Qe=t(308),Ve=t.n(Qe),Be=function(e){var a=Object(s.h)().search,t=Object(s.g)(),n=Ve.a.parse(a).token||localStorage.getItem("token");return n?(localStorage.setItem("token",n),t.push("/")):window.open(T,"_self"),r.a.createElement("div",null)},We=t(314),Ye=function(e){var a=e.component,t=Object(We.a)(e,["component"]),n="admin"===localStorage.getItem("roles");return r.a.createElement(s.b,Object.assign({},t,{render:function(e){var t=e.location;return n?r.a.createElement(a,null):r.a.createElement(s.a,{to:{pathname:"/",state:{from:t}}})}}))},ze=t(309),Je=t.n(ze),Xe=(t(617),t(618),t(286),function(){return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{href:"/lunch-ordering-fe",className:"main-logo"},r.a.createElement("img",{src:Je.a,alt:"logo"})),r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(Se,null)),r.a.createElement(s.b,{path:"/orders"},r.a.createElement(Pe,null)),r.a.createElement(s.b,{path:"/login"},r.a.createElement(Be,null)),r.a.createElement(Ye,{path:"/all-orders",component:He}),r.a.createElement(Ye,{path:"/orders-history",component:Ke})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S,null,r.a.createElement(Xe,null)),document.getElementById("root"))}},[[315,1,2]]]);
//# sourceMappingURL=main.574ec806.chunk.js.map