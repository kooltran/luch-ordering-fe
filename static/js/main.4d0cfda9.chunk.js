(this["webpackJsonpfood-ordering"]=this["webpackJsonpfood-ordering"]||[]).push([[0],{128:function(e,a,t){e.exports=t.p+"static/media/cross.441d8611.svg"},264:function(e,a,t){},268:function(e,a,t){e.exports=t.p+"static/media/plus.311313cd.svg"},269:function(e,a,t){e.exports=t.p+"static/media/cart.890dce60.svg"},270:function(e,a,t){e.exports=t.p+"static/media/fobiden-order.6b4b70dc.svg"},280:function(e,a,t){e.exports=t.p+"static/media/congrats.211b8e65.svg"},281:function(e,a,t){e.exports=t.p+"static/media/checklist.80d775c4.svg"},288:function(e,a,t){e.exports=t.p+"static/media/logo.913ae04a.svg"},293:function(e,a,t){e.exports=t(588)},535:function(e,a,t){},536:function(e,a,t){},537:function(e,a,t){},570:function(e,a,t){},586:function(e,a,t){},588:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(13),i=t.n(c),l=t(103),s=t(16),o=t(4),u=t(8),d=t.n(u),m=t(20),E=t(2),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=setInterval((function(e,a,t){new Date(e,a,t,13,45,0,0).getTime()-(new Date).getTime()<0&&clearInterval(O)}),1e3),g=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.reduce((function(e,r){var n=r[a];return"object"===typeof n&&t?(e[n[t]]=e[n[t]]||[],e[n[t]].push(r)):(e[n]=e[n]||[],e[n].push(r)),e}),{})},_=t(267),f=t.n(_)()({menu:[function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"GET_MENU_LOADING":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,menuList:[],getMenuFail:null});case"GET_MENU_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,menuList:a.payload,getMenuFail:null});case"GET_MENU_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,menuList:[],getMenuFail:a.payload.message});default:return e}},{menuList:[],isLoading:!1,getMenuFail:null}],users:[function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"GET_CUR_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{user:a.payload,getUserFail:null});case"GET_CUR_USER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{user:{},getUserFail:a.payload.message});case"GET_USERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{users:a.payload,getUserFail:null});case"GET_USERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{users:[],getUserFail:a.payload.message});default:return e}},{user:{},users:[],userFail:null}],cart:[function(e,a){switch(a.type){case"ADD_CART_ITEM":return Object(E.a)(Object(E.a)({},e),{},{cartList:a.payload,isAnimateCart:!0,isCartAdded:!0});case"REMOVE_CART_ADDED":return Object(E.a)(Object(E.a)({},e),{},{isCartAdded:!0,isAnimateCart:!1});case"DELETE_CART_ITEM":var t=e.cartList,r=a.payload;return Object(E.a)(Object(E.a)({},e),{},{cartList:t.filter((function(e){return e.id!==r.id})),isAnimateCart:!0,isCartAdded:!1});case"DELETE_CART":return Object(E.a)(Object(E.a)({},e),{},{cartList:[],isAnimateCart:!1,isCartAdded:!1});default:return e}},{cartList:[],isAnimateCart:!1,isCartAdded:!1}],submitOrder:[function(e,a){switch(a.type){case"SUBMIT_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!1,isLoading:!0,submitOrderFail:null});case"SUBMIT_ORDERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!0,isLoading:!1,submitOrderFail:null});case"SUBMIT_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{createOrderSuccess:!1,isLoading:!1,submitOrderFail:a.payload});default:return e}},{createOrderSuccess:!1,isLoading:!1,submitOrderFail:null}],orders:[function(e,a){switch(a.type){case"GET_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!0,orderList:[],getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"GET_ORDERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:a.payload,getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"GET_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:[],getOrdersFail:a.payload.message,deleteOrderRequest:!1,deleteOrderFail:null});case"DELETE_ORDER_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,getOrdersFail:null,deleteOrderRequest:!0,deleteOrderFail:null});case"DELETE_ORDER_SUCCESS":var t=a.payload,r=e.orderList;return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:r.filter((function(e){return e._id!==t._id})),getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null});case"DELETE_ORDER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isOrdersLoading:!1,orderList:[],getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:a.payload.message});default:return e}},{orderList:[],isOrdersLoading:!1,getOrdersFail:null,deleteOrderRequest:!1,deleteOrderFail:null}],orderTimeout:[function(e,a){switch(a.type){case"SET_ORDER_TIMEOUT":return Object(E.a)(Object(E.a)({},e),{},{isOrderTimeout:!0});case"RESET_ORDER_TIMEOUT":return Object(E.a)(Object(E.a)({},e),{},{isOrderTimeout:!1});default:return e}},{isOrderTimeout:!1}],allOrders:[function(e,a){switch(a.type){case"GET_ALL_ORDERS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,allOrderList:[],getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:a.payload,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderList:[],getOrdersFail:a.payload.message,isCheckingPaid:!1,checkPaidFail:null});case"CHECK_PROVIDER_PAID_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!0,checkPaidFail:null});case"CHECK_PROVIDER_PAID_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,allOrderList:a.payload,checkPaidFail:null});case"CHECK_PROVIDER_PAID_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,allOrderList:[],checkPaidFail:a.payload});case"CHECK_PAID_ORDER_ITEM_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!0});case"CHECK_PAID_ORDER_ITEM_SUCCESS":var t=e.allOrderList,r=a.payload,n=g(r,"date"),c=t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{orders:n[e.createdAt]})}));return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:c});case"CHECK_PAID_ORDER_ITEM_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderList:[],checkPaidFail:a.payload});default:return e}},{allOrderList:[],isLoading:!1,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null}],allOrdersByUser:[function(e,a){switch(a.type){case"GET_ALL_ORDERS_BY_USER_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0,allOrderListUser:[],getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_BY_USER_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderListUser:a.payload,getOrdersFail:null,isCheckingPaid:!1,checkPaidFail:null});case"GET_ALL_ORDERS_BY_USER_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1,allOrderListUser:[],getOrdersFail:a.payload.message,isCheckingPaid:!1,checkPaidFail:null});case"CHECK_PAID_ALL_WEEK_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!0,checkPaidFail:null,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ALL_WEEK_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderListUser:a.payload,checkPaidFail:null,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ALL_WEEK_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderListUser:[],checkPaidFail:a.payload.message,isLoading:!1,getOrdersFail:null});case"CHECK_PAID_ORDER_ITEM_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!0});case"CHECK_PAID_ORDER_ITEM_SUCCESS":var t=e.allOrderListUser,r=a.payload,n=t.map((function(e){var a=g(r,"_id"),t=e.orders.map((function(e){return a[e._id][0]}));return Object(E.a)(Object(E.a)({},e),{},{orders:t})}));return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderListUser:n,checkPaidFail:null});case"CHECK_PAID_ORDER_ITEM_FAIL":return Object(E.a)(Object(E.a)({},e),{},{isCheckingPaid:!1,allOrderListUser:[],checkPaidFail:a.payload});default:return e}},{allOrderListUser:[],isLoading:!1,isCheckingPaid:!1,checkPaidFail:null,getOrdersFail:null}]}),h=Object(o.a)(f,2),b=h[0],v=h[1],C=n.a.createContext({}),S=function(e){var a=e.children,t=Object(r.useReducer)(b,v),c=Object(o.a)(t,2),i=c[0],l=c[1];return n.a.createElement(C.Provider,{value:{data:i,setData:l}},a)},j=function(){var e=Object(r.useContext)(C),a=e.data,t=e.setData;return[a,Object(r.useCallback)((function(e){var a=e.type,r=e.payload;t({payload:r,type:a})}),[t])]},y=function(e){return{type:"GET_MENU_SUCCESS",payload:e}},L=t(22),R=t.n(L);console.log("production");var k="https://luch-ordering.herokuapp.com",A="https://luch-ordering.herokuapp.com/google",D=function(){var e=localStorage.getItem("token");return R.a.get("".concat(k,"/users/current"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},T=t(59),I=t.n(T),N=(t(535),t(289)),P=t(10),F=t.n(P),U=t(268),w=t.n(U),M=function(e){return{type:"ADD_CART_ITEM",payload:e}},x=function(e){var a=e.item,t=Object(r.useState)(1),c=Object(o.a)(t,2),i=c[0],l=c[1],s=j(),u=Object(o.a)(s,2),d=u[0],m=d.users,E=d.cart,p=d.orderTimeout,O=u[1],g=m.user,_=E.cartList;return n.a.createElement("div",{className:F()("menu-item",{"is-disabled":_.some((function(e){return e.id===a._id}))||p.isOrderTimeout})},n.a.createElement("div",{className:"image"},n.a.createElement("img",{className:"img-dish",src:a.img,alt:a.name}),n.a.createElement("div",{onClick:function(){var e={id:a._id,dish_name:a.name,quantity:i};if(g.username)if(0===_.length)O(M(_)),setTimeout((function(){return O({type:"REMOVE_CART_ADDED"})}),500),_.push(e);else{var t=[].concat(Object(N.a)(_),[e]);O(M(t)),setTimeout((function(){return O({type:"REMOVE_CART_ADDED"})}),500)}else window.open(A,"_self")}},n.a.createElement("img",{className:"icon-add",src:w.a,alt:""}))),n.a.createElement("div",{className:"desc"},n.a.createElement("div",{className:"info"},n.a.createElement("span",{className:"name"},a.name),n.a.createElement("span",{className:"price"},a.price)),n.a.createElement("div",{className:"quantity"},n.a.createElement("input",{type:"number",value:i,onChange:function(e){var a=e.target.value,t=parseInt(a);l(t<=0?1:t>5?5:t)}}))))},G=function(){var e=j(),a=Object(o.a)(e,2),t=a[0].menu,c=a[1],i=function(){var e=j(),a=Object(o.a)(e,2)[1];return Object(r.useCallback)(Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"GET_MENU_LOADING"}),e.prev=1,e.next=4,R.a.get("".concat(k,"/menuList")).then((function(e){return e.data}));case 4:t=e.sent,a(y(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"GET_MENU_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[a])}(),l=t.isLoading,s=t.menuList;return Object(r.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:a=e.sent,localStorage.setItem("roles",a.roles),c({type:"GET_CUR_USER_SUCCESS",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),i()}),[c,i]),n.a.createElement("div",{className:"menu-wrapper"},l&&n.a.createElement("img",{className:"icon-loading",src:I.a,alt:"loading-spinner"}),s.map((function(e){return n.a.createElement(x,{key:e._id,item:e})})))},q=t(128),B=t.n(q),K=function(e){var a=e.order,t=j(),r=Object(o.a)(t,2)[1];return n.a.createElement("div",{className:"cart-item"},n.a.createElement("div",{className:"name"},a.dish_name),n.a.createElement("div",{className:"desc"},n.a.createElement("div",{className:"qty"},a.quantity),n.a.createElement("span",{className:"remove",onClick:function(){r(function(e){return{type:"DELETE_CART_ITEM",payload:e}}(a))}},n.a.createElement("img",{src:B.a,alt:"remove-order"}))))},H=function(e){return{type:"SUBMIT_ORDERS_FAIL",payload:e}},Q=function(e){return{type:"GET_ORDERS_SUCCESS",payload:e}},z=function(e){return{type:"GET_ALL_ORDERS_SUCCESS",payload:e}},V=function(e){return{type:"DELETE_ORDER_SUCCESS",payload:e}},W=function(e){return{type:"GET_ALL_ORDERS_BY_USER_SUCCESS",payload:e}},Y=function(e){var a=localStorage.getItem("token");return R.a.post("".concat(k,"/orders/create"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.data}))},J=function(){var e=localStorage.getItem("token");return R.a.get("".concat(k,"/orders/list"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},X=function(e){var a=localStorage.getItem("token");return R.a.post("".concat(k,"/orders/check-paid"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.data}))},$=function(e){var a=localStorage.getItem("token");return R.a.post("".concat(k,"/orders/check-paid-provider"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.data}))},Z=function(e){var a=localStorage.getItem("token");return R.a.post("".concat(k,"/orders/paid-allweeks"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.data}))},ee=function(e){var a=localStorage.getItem("token");return R.a.post("".concat(k,"/orders/delete"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.data}))},ae=function(){var e=localStorage.getItem("token");return R.a.get("".concat(k,"/orders/payment"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},te=function(){var e=localStorage.getItem("token");return R.a.get("".concat(k,"/orders/payment-by-user"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data}))},re=t(269),ne=t.n(re),ce=(t(536),function(){var e=j(),a=Object(o.a)(e,1)[0],t=a.cart,c=a.submitOrder,i=t.cartList,l=t.isAnimateCart,s=t.isCartAdded,u=c.isLoading,E=Object(r.useState)(!1),p=Object(o.a)(E,2),O=p[0],g=p[1],_=function(){var e=j(),a=Object(o.a)(e,2)[1];return Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SUBMIT_ORDERS_REQUEST"}),e.prev=1,e.next=4,Y(t);case 4:e.sent,a({type:"SUBMIT_ORDERS_SUCCESS"}),a({type:"DELETE_CART"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a(H(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),[a])}();Object(r.useEffect)((function(){s&&g(s)}),[s]);return n.a.createElement("div",{className:"cart-wrapper"},n.a.createElement("div",{className:F()("cart-icon",{shake:l}),onClick:function(){g(!O)}},n.a.createElement("img",{src:ne.a,alt:"cart-icon"}),n.a.createElement("span",{className:"cart-qty"},i.length)),n.a.createElement("div",{className:F()("cart-content",{show:O&&i.length})},u&&n.a.createElement("img",{className:"cart-loading",src:I.a,alt:""}),i.map((function(e){return n.a.createElement(K,{key:e.id,order:e})})),n.a.createElement("button",{className:"btn-order",onClick:function(){var e=i.map((function(e){return{dishId:e.id,quantity:e.quantity,date:(new Date).toDateString(),paid:!1}}));_(e)}},"Order")))}),ie=t(589),le=t(270),se=t.n(le),oe=(t(537),function(){var e=new Date,a=e.getFullYear(),t=e.getMonth(),c=e.getDate(),i=new Date(a,t,c,10,58,0,0).getTime(),l=new Date(a,t,c,8,30,0,0).getTime(),s=(new Date).getTime()>=l,u=Object(r.useState)({hours:0,minutes:0,seconds:0}),d=Object(o.a)(u,2),m=d[0],E=d[1],p=Object(r.useState)(i),O=Object(o.a)(p,1)[0],g=Object(r.useState)(!1),_=Object(o.a)(g,2),f=_[0],h=_[1],b=Object(r.useCallback)((function(){if(O){var e=(new Date).getTime(),a=O-e,t=Math.floor(a%36e5/6e4),r=Math.floor(a%6e4/1e3),n=[1,2,3,4,5,6,7,8,9],c=Math.floor(a%864e5/36e5);n.includes(c)&&(c="0".concat(c)),n.includes(t)&&(t="0".concat(t)),n.includes(r)&&(r="0".concat(r)),E({hours:c,minutes:t,seconds:r}),h(c<=0&&t<=0&&r<=0)}}),[O]);Object(r.useEffect)((function(){if(setInterval((function(){return b()}),1e3),f)return function(){return clearInterval(b)}}),[f,b]);var v=m.hours,C=m.minutes,S=m.seconds;return n.a.createElement("div",{className:"countdown"},v>=0&&C>=0&&S>0&&n.a.createElement("div",null,n.a.createElement("p",{className:"countdown-message"},"Th\u1eddi gian order c\u1ee7a b\u1ea1n c\xf2n l\u1ea1i"),n.a.createElement("span",null,v),n.a.createElement("span",null,C),n.a.createElement("span",null,S)),n.a.createElement(ie.a,{className:"timeout-modal",visible:f||!s,onCancel:function(){},width:"60vw",height:"60vh",footer:null},n.a.createElement("img",{className:"timeout-icon",src:se.a,alt:"forbiden-order"}),f&&n.a.createElement("div",{className:"timeout-message"},"Th\u1eddi gian order c\u01a1m h\xf4m nay \u0111\xe3 h\u1ebft, b\u1ea1n vui l\xf2ng quay l\u1ea1i v\xe0o l\xfac"," ",n.a.createElement("span",{className:"note"},"8h00")," ng\xe0y mai nh\xe9!!!"),!s&&n.a.createElement("div",{className:"timeout-message"},"Th\u1eddi gian order ch\u01b0a t\u1edbi, b\u1ea1n vui l\xf2ng quay l\u1ea1i v\xe0o l\xfac"," ",n.a.createElement("span",{className:"note"},"8h00")," nh\xe9!!!")))}),ue=t(280),de=t.n(ue),me=t(281),Ee=t.n(me),pe=(t(569),t(106)),Oe=(t(570),function(){var e=j(),a=Object(o.a)(e,1)[0].submitOrder.createOrderSuccess,t=Object(r.useState)(a),c=Object(o.a)(t,2),i=c[0],l=c[1],u=Object(s.g)(),d="admin"===localStorage.getItem("roles");Object(r.useEffect)((function(){a&&l(a)}),[a]);var m=function(){l(!1)};return n.a.createElement("div",{className:"page"},n.a.createElement("h1",{className:"text-uppercase text-center"},"SP Team Lunch Ordering"),!d&&n.a.createElement(oe,null),n.a.createElement("a",{href:"/lunch-ordering-fe/#/orders",className:"icon-orders"},n.a.createElement("img",{src:Ee.a,alt:"checklist"})),n.a.createElement(ce,null),n.a.createElement(G,null),n.a.createElement(ie.a,{className:"congrats-modal",visible:i,onCancel:m,width:"60vw",height:"60vh",footer:[n.a.createElement(pe.a,{size:"large",key:"back",onClick:m},"\u0110\xf3ng"),n.a.createElement(pe.a,{key:"submit",size:"large",type:"primary",onClick:function(){u.push("/orders")}},"Xem Order")]},n.a.createElement("img",{className:"modal-icon",src:de.a,alt:"forbiden-order"}),n.a.createElement("div",{className:"congrats-message"},"Thank you! B\u1ea1n \u0111\xe3 order th\xe0nh c\xf4ng!!",n.a.createElement("p",null,"Ch\xfac Ngon mi\u1ec7ng"))))}),ge=function(e){return{type:"CHECK_PAID_ORDER_ITEM_SUCCESS",payload:e}},_e=function(e){return{type:"CHECK_PROVIDER_PAID_SUCCESS",payload:e}},fe=function(e){return{type:"CHECK_PROVIDER_PAID_FAIL",payload:e}},he=function(e){return{type:"CHECK_PAID_ALL_WEEK_SUCCESS",payload:e}},be=function(e){return{type:"CHECK_PAID_ALL_WEEK_FAIL",payload:e}},ve=function(){var e=j(),a=Object(o.a)(e,2)[1];return{checkPaidOrderItem:Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PAID_ORDER_ITEM_REQUEST"}),e.prev=1,e.next=4,X(t);case 4:r=e.sent,a(ge(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a((e.t0,{type:"CHECK_PAID_ORDER_ITEM_FAIL"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a]),checkProviderPaidOrder:Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PROVIDER_PAID_REQUEST"}),e.prev=1,e.next=4,$(t);case 4:r=e.sent,a(_e(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(fe(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a]),checkPaidOrderAllWeek:Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"CHECK_PAID_ALL_WEEK_REQUEST"}),e.prev=1,e.next=4,Z(t);case 4:r=e.sent,a(he(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(be(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[a])}},Ce=function(e){var a=e.order,t=e.isAdmin,c=e.isAllOrders,i=e.isDateMode,l=Object(r.useState)(a.paid),s=Object(o.a)(l,2),u=s[0],E=s[1],O=ve().checkPaidOrderItem,g=j(),_=Object(o.a)(g,1)[0].allOrders.isCheckingPaid,f=a.quantity,h=a.dish,b=h.name,v=h.price,C=a.user.username,S=a.date,y=j(),L=Object(o.a)(y,1)[0].orders.deleteOrderRequest,R=Object(r.useState)(!1),k=Object(o.a)(R,2),A=k[0],D=k[1],T=function(){var e=j(),a=Object(o.a)(e,2),t=(a[0].allOrders.allOrderList,a[1]);return Object(r.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"DELETE_ORDER_REQUEST"}),e.prev=1,e.next=4,ee(a);case 4:r=e.sent,t(V(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"DELETE_ORDER_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),[t])}(),I=function(){return D(!1)};return n.a.createElement("div",{key:a._id,className:"order-item"},n.a.createElement("span",{className:"name"},"".concat(i?C:S)),n.a.createElement("span",{className:"quantity"},f),n.a.createElement("span",{className:"dish-name"},b),!c&&n.a.createElement("span",{className:"date"},function(e){if(e){var a=new Date(e),t=a.getDate(),r=a.getMonth(),n=p[r],c=a.getFullYear();return"".concat(t," ").concat(n," ").concat(c)}}(S)),n.a.createElement("span",{className:"price"},"".concat(parseInt(v.slice(0,2))*f,",000\u0111")),t&&n.a.createElement(n.a.Fragment,null,c&&n.a.createElement("div",{className:"paid"},n.a.createElement("span",{className:"order-checkbox"},n.a.createElement("input",{type:"checkbox",onChange:function(e){var t=e.target.checked,r={id:a._id,isPaid:t,isDateMode:i};O(r),E(t)},checked:u,disabled:_}),n.a.createElement("span",{className:F()("check-mask",{"is-disabled":_})}))),!c&&n.a.createElement("span",{className:"delete",onClick:function(){return D(!0)}},n.a.createElement("img",{src:B.a,alt:"delete-order"}))),n.a.createElement(ie.a,{className:"order-item__modal",visible:A,onCancel:I,footer:[n.a.createElement(pe.a,{size:"large",key:"back",onClick:I},"\u0110\xf3ng"),n.a.createElement(pe.a,{key:"submit",size:"large",type:"primary",loading:L,onClick:function(){T(a)}},"Xo\xe1")]},n.a.createElement("p",null,"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n xo\xe1 ch\u1ee9???")))},Se=(t(264),function(){var e=j(),a=Object(o.a)(e,2),t=a[0].orders,c=t.orderList,i=t.isOrdersLoading,l=a[1],s="admin"===localStorage.getItem("roles");Object(r.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"GET_ORDERS_REQUEST"}),e.prev=1,e.next=4,J();case 4:a=e.sent,l(Q(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:"GET_ORDERS_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[l]);var u=c.sort((function(e,a){return e.dish.name.localeCompare(a.name)})),E=c.map((function(e){return{quantity:e.quantity,dishName:e.dish.name,price:35}})),p=g(E,"dishName"),O=Object.keys(p).map((function(e){return{name:e,qty:p[e].reduce((function(e,a){return e+a.quantity}),0),price:p[e].reduce((function(e,a){return e+a.price*a.quantity}),0)}})),_=O.reduce((function(e,a){return e+a.qty}),0),f=O.reduce((function(e,a){return e+a.price}),0);return n.a.createElement("div",{className:"page"},n.a.createElement("div",{className:"order-wrapper"},n.a.createElement("h1",{className:"order-title"},"Orders List"),i&&n.a.createElement("img",{className:"icon-loading",src:I.a,alt:"loading-spinner"}),0!==u.length&&n.a.createElement("div",{className:"order-total"},n.a.createElement("h3",{className:"title"},"Total List"),n.a.createElement("div",{className:"header"},n.a.createElement("span",null,"T\xean m\xf3n"),n.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),n.a.createElement("span",null,"Gi\xe1")),O.map((function(e){return n.a.createElement("div",{key:e.name,className:"item"},n.a.createElement("span",null,e.name),n.a.createElement("span",null,e.qty),n.a.createElement("span",null,"".concat(e.price,".000\u0111")))})),n.a.createElement("div",{className:"total"},n.a.createElement("span",null,"T\u1ed5ng c\u1ed9ng"),n.a.createElement("span",null,_),n.a.createElement("span",null,"".concat(f,".000\u0111")))),0!==u.length&&n.a.createElement("div",{className:"order-content"},n.a.createElement("div",{className:"order-item__header"},n.a.createElement("span",null,"Ng\u01b0\u1eddi Order"),n.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),n.a.createElement("span",{className:"dish-name"},"T\xean M\xf3n"),n.a.createElement("span",null,"Ng\xe0y Order"),n.a.createElement("span",null,"Gi\xe1"),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"delete"}))),u.map((function(e){return n.a.createElement(Ce,{key:e._id,order:e,isAdmin:s,isAllOrders:!1,isDateMode:!0})})))))}),je=t(127),ye=function(e){var a=e.item,t=e.isAdmin,r=e.isAllOrders,c=e.isDateMode,i=e.isCheckingPaid,l=a.orders[0].user,s=Object(je.a)({},l._id,l.username),o=ve(),u=o.checkProviderPaidOrder,d=o.checkPaidOrderAllWeek;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"order-item__date-title",key:a._id},n.a.createElement("span",null,"".concat(c?a.createdAt:s[a.user])),n.a.createElement("div",{className:"paid-provider"},n.a.createElement("span",{className:"order-checkbox"},n.a.createElement("input",{type:"checkbox",onChange:c?function(e){var t=e.target.checked;u({id:a._id,isPaid:t})}:function(e){var t=e.target.checked;console.log(a.user,"userId"),d({id:a._id,isPaidAllWeek:t,userId:a.user})},checked:a.isPaid,disabled:i}),n.a.createElement("span",{className:F()("check-mask",{"is-disabled":i})})))),n.a.createElement("div",{className:"order-item__header"},n.a.createElement("span",null,"".concat(c?"Ng\u01b0\u1eddi Order":"Ng\xe0y Order")),n.a.createElement("span",null,"S\u1ed1 L\u01b0\u1ee3ng"),n.a.createElement("span",null,"T\xean M\xf3n"),n.a.createElement("span",null,"Gi\xe1"),t&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"paid"},"Paid"),!r&&n.a.createElement("span",{className:"delete"}))),a.orders.map((function(e){return n.a.createElement(Ce,{key:e._id,order:e,isAdmin:!0,isAllOrders:r,isDateMode:c})})),n.a.createElement("div",{className:"order-item__total"},n.a.createElement("span",null,"T\u1ed5ng C\u1ed9ng"),n.a.createElement("span",{className:"price"},"".concat(a.totalPrice,",000\u0111"))))},Le=t(591),Re=function(){var e=j(),a=Object(o.a)(e,2),t=a[0],c=t.allOrders,i=c.allOrderList,l=c.isLoading,s=c.isCheckingPaid,u=t.allOrdersByUser,p=u.allOrderListUser,O=u.isCheckingPaid,g=a[1],_=Object(r.useState)(!0),f=Object(o.a)(_,2),h=f[0],b=f[1],v="admin"===localStorage.getItem("roles"),C=i.map((function(e){var a=e.orders.reduce((function(e,a){return e+35*a.quantity}),0);return Object(E.a)(Object(E.a)({},e),{},{totalPrice:a})})),S=p.map((function(e){var a=e.orders&&e.orders.reduce((function(e,a){return e+35*a.quantity}),0);return Object(E.a)(Object(E.a)({},e),{},{totalPrice:a})}));Object(r.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var a,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"GET_ALL_ORDERS_REQUEST"}),e.prev=1,e.next=4,ae();case 4:a=e.sent,t=a.filter((function(e){return e.orders.length>0})),g(z(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g({type:"GET_ALL_ORDERS_FAIL",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();(function(){var e=Object(m.a)(d.a.mark((function e(){var a,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"GET_ALL_ORDERS_BY_USER_REQUEST"}),e.prev=1,e.next=4,te();case 4:a=e.sent,t=a.filter((function(e){return e.orders.length>0})),g(W(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g({type:"GET_ALL_ORDERS_BY_USER_FAIL",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}})()(),e()}),[g]);return n.a.createElement("div",{className:"page"},n.a.createElement("div",{className:"order-wrapper"},n.a.createElement(Le.a,{className:"btn-switch",defaultChecked:h,onChange:function(e){return b(e)}}),n.a.createElement("h1",{className:"order-title"},"All Orders List"),l&&n.a.createElement("img",{className:"icon-loading",src:I.a,alt:"loading-spinner"}),h&&0!==C.length&&C.map((function(e){return n.a.createElement(ye,{key:e._id,item:e,isAdmin:v,isAllOrders:!0,isDateMode:h,isCheckingPaid:s})})),!h&&0!==S.length&&S.map((function(e){return n.a.createElement(ye,{key:e._id,item:e,isAdmin:v,isAllOrders:!0,isDateMode:h,isCheckingPaid:O})}))))},ke=t(287),Ae=t.n(ke),De=function(e){var a=Object(s.h)().search,t=Object(s.g)(),r=Ae.a.parse(a).token||localStorage.getItem("token");return r?(localStorage.setItem("token",r),t.push("/")):window.open(A,"_self"),n.a.createElement("div",null)},Te=t(291),Ie=function(e){var a=e.component,t=Object(Te.a)(e,["component"]),r="admin"===localStorage.getItem("roles");return n.a.createElement(s.b,Object.assign({},t,{render:function(e){var t=e.location;return r?n.a.createElement(a,null):n.a.createElement(s.a,{to:{pathname:"/",state:{from:t}}})}}))},Ne=t(288),Pe=t.n(Ne),Fe=(t(586),t(587),t(266),function(){return n.a.createElement("div",{className:"main-wrapper"},n.a.createElement("div",{className:"container"},n.a.createElement("a",{href:"/lunch-ordering-fe",className:"main-logo"},n.a.createElement("img",{src:Pe.a,alt:"logo"})),n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/"},n.a.createElement(Oe,null)),n.a.createElement(s.b,{path:"/orders"},n.a.createElement(Se,null)),n.a.createElement(s.b,{path:"/login"},n.a.createElement(De,null)),n.a.createElement(Ie,{path:"/all-orders",component:Re})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(S,null,n.a.createElement(Fe,null)),document.getElementById("root"))},59:function(e,a,t){e.exports=t.p+"static/media/loading.546dec86.svg"}},[[293,1,2]]]);
//# sourceMappingURL=main.4d0cfda9.chunk.js.map